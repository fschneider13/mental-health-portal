(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{63625:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gad7",function(){return a(92043)}])},80257:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(85893),r=a(67294),l=a(41664),o=a.n(l),s=a(8465),i=a(2370);function c(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{(0,s.E)().then(e=>{l(e);let a=e.onAuthStateChanged(e=>{t(e)});return()=>a()})},[]);let c=async()=>{if(a){let e=new i.GoogleAuthProvider;try{await (0,i.signInWithPopup)(a,e)}catch(e){console.error("Google Login Error:",e.message),alert("Login failed: "+e.message)}}else alert("Authentication not initialized. Please refresh the page.")},d=async()=>{if(a)try{await (0,i.signOut)(a)}catch(e){console.error("Logout Error:",e.message),alert("Logout failed: "+e.message)}else alert("Authentication not initialized.")};return(0,n.jsx)("nav",{className:"bg-blue-600 text-white p-4 shadow-md",children:(0,n.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,n.jsx)(o(),{href:"/",className:"text-xl font-bold hover:text-blue-200",children:"Mental Health Portal"}),(0,n.jsx)("div",{className:"space-x-4",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"text-sm",children:["Welcome, ",e.displayName||e.email]}),(0,n.jsx)("button",{onClick:d,className:"p-2 bg-red-500 rounded hover:bg-red-600","aria-label":"Logout",children:"Logout"})]}):(0,n.jsx)("button",{onClick:c,className:"p-2 bg-green-500 rounded hover:bg-green-600","aria-label":"Login with Google",children:"Login with Google"})})]})})}},68720:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(85893),r=a(67294),l=a(11163),o=a(41664),s=a.n(o),i=a(8465),c=a(2370);function d(e,t){let a={depression:{normal:9,mild:13,moderate:20,severe:27},anxiety:{normal:7,mild:9,moderate:14,severe:19},stress:{normal:14,mild:18,moderate:25,severe:33}};return e<=a[t].normal?"Normal":e<=a[t].mild?"Mild":e<=a[t].moderate?"Moderate":e<=a[t].severe?"Severe":"Extremely Severe"}function u(e){let{questions:t,type:a}=e,[o,u]=(0,r.useState)({}),[h,m]=(0,r.useState)(0),[g,f]=(0,r.useState)(null),[p,y]=(0,r.useState)(null),b=(0,l.useRouter)();(0,r.useEffect)(()=>{(0,i.E)().then(e=>{f(e);let t=e.onAuthStateChanged(e=>y(e));return()=>t()})},[]);let x=(e,t)=>{u(a=>({...a,[e]:t}))};if(!g||!p)return(0,n.jsxs)("div",{className:"container mx-auto p-4 text-center",children:[(0,n.jsx)("p",{className:"mb-4",children:"Please login with Google to start the questionnaire."}),(0,n.jsx)("button",{onClick:async()=>{if(g){let e=new c.GoogleAuthProvider;try{await (0,c.signInWithPopup)(g,e)}catch(e){alert("Login failed: "+e.message)}}},className:"p-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Login with Google"})]});let N=t[h];return(0,n.jsxs)("div",{className:"container mx-auto p-4 max-w-xl",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold mb-6 text-center",children:[a.toUpperCase()," Questionnaire"]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("p",{className:"mb-2 font-medium",children:["Question ",h+1," of ",t.length]}),(0,n.jsx)("p",{className:"mb-2",children:N.text}),N.options.map((e,t)=>(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("input",{type:"radio",name:"question-".concat(h),value:t,checked:o[h]===t,onChange:()=>x(h,t),className:"mr-2"}),e]},t))]}),(0,n.jsxs)("div",{className:"flex justify-between mt-6",children:[h>0&&(0,n.jsx)("button",{onClick:()=>{m(e=>Math.max(e-1,0))},className:"p-2 bg-gray-200 rounded hover:bg-gray-300",children:"Previous"}),h<t.length-1?(0,n.jsx)("button",{onClick:()=>{if(void 0===o[h]){alert("Please select an option to proceed.");return}m(e=>e+1)},className:"ml-auto p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Next Question"}):(0,n.jsx)("button",{onClick:()=>{if(Object.keys(o).length!==t.length){alert("Please answer all questions before submitting.");return}let{score:e,category:n}=function(e,t){let a;let n=t.reduce((e,t)=>e+t,0);switch(e){case"phq9":a=n<=4?"Minimal":n<=9?"Mild":n<=14?"Moderate":n<=19?"Moderately Severe":"Severe";break;case"gad7":a=n<=4?"Minimal":n<=9?"Mild":n<=14?"Moderate":"Severe";break;case"dass21":let r=2*t.slice(0,7).reduce((e,t)=>e+t,0),l=2*t.slice(7,14).reduce((e,t)=>e+t,0),o=2*t.slice(14,21).reduce((e,t)=>e+t,0);return{score:{depression:r,anxiety:l,stress:o},category:{depression:d(r,"depression"),anxiety:d(l,"anxiety"),stress:d(o,"stress")}};default:a="Unknown"}return{score:n,category:a}}(a,t.map((e,t)=>Number(o[t]))),r=encodeURIComponent(JSON.stringify(e)),l=encodeURIComponent(JSON.stringify(n));b.push("/results?type=".concat(a,"&score=").concat(r,"&category=").concat(l))},className:"ml-auto p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Submit"})]}),(0,n.jsx)(s(),{href:"/",className:"mt-8 inline-block text-blue-500 hover:underline",children:"Back to Home"})]})}},92043:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var n=a(85893),r=a(67294),l=a(68720);let o=[{text:"Placeholder: Feeling nervous, anxious, or on edge",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Not being able to stop or control worrying",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Worrying too much about different things",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Trouble relaxing",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Being so restless that it is hard to sit still",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Becoming easily annoyed or irritable",options:["Not at all","Several days","More than half the days","Nearly every day"]},{text:"Placeholder: Feeling afraid as if something awful might happen",options:["Not at all","Several days","More than half the days","Nearly every day"]}];function s(){let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t(()=>a(80257).Z)},[]),(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-100 to-white",children:[e&&(0,n.jsx)(e,{}),(0,n.jsx)(l.Z,{questions:o,type:"gad7"})]})}},11163:function(e,t,a){e.exports=a(43079)},8465:function(e,t,a){"use strict";a.d(t,{E:function(){return l}});let n={apiKey:"NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyBT2P8yki55-hVC60qyEmWO-Vat58PMK1A\nNEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:mental-health-portal-1c846.firebaseapp.com\nNEXT_PUBLIC_FIREBASE_PROJECT_ID:mental-health-portal-1c846\nNEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:mental-health-portal-1c846.firebasestorage.app\nNEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:592056459137\nNEXT_PUBLIC_FIREBASE_APP_ID:1:592056459137:web:f735f5a164ea3acc8d5280",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""},r=null;Object.values(n).some(e=>!e)?(console.error("Firebase config incomplete"),r=Promise.reject(Error("Firebase config incomplete"))):r=a.e(977).then(a.bind(a,83977)).then(e=>{let{initializeApp:t}=e;return t(n)}).then(e=>Promise.resolve().then(a.bind(a,2370))).then(e=>{let{getAuth:t}=e;return t(app)});let l=()=>r}},function(e){e.O(0,[551,664,204,888,774,179],function(){return e(e.s=63625)}),_N_E=e.O()}]);